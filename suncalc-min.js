(function(n){"use strict";function t(n){return n.valueOf()/T-.5+y}function r(n){return new Date((n+.5-y)*T)}function u(n){return t(n)-C}function e(n,t){return H(P(n)*k(F)-x(t)*P(F),k(n))}function i(n,t){return z(P(t)*k(F)+k(t)*P(F)*P(n))}function o(n,t,r){return H(P(n),k(n)*P(t)-x(r)*k(t))}function a(n,t,r){return z(P(t)*P(r)+k(t)*k(r)*k(n))}function c(n,t){return M*(280.16+360.9856235*n)-t}function d(n){return M*(357.5291+.98560028*n)}function f(n){return M*(1.9148*P(n)+.02*P(2*n)+3e-4*P(3*n))}function s(n,t){var r=102.9372*M;return n+t+r+E}function v(n){var t=d(n),r=f(t),u=s(t,r);return{dec:i(u,0),ra:e(u,0)}}function l(n,t){return D.round(n-N-t/(2*E))}function g(n,t,r){return N+(n+t)/(2*E)+r}function h(n,t,r){return C+n+.0053*P(t)-.0069*P(2*r)}function m(n,t,r){return S((P(n)-P(t)*P(r))/(k(t)*k(r)))}function p(n){var t=M*(218.316+13.176396*n),r=M*(134.963+13.064993*n),u=M*(93.272+13.22935*n),o=t+6.289*M*P(r),a=5.128*M*P(u),c=385001-20905*k(r);return{ra:e(o,a),dec:i(o,a),dist:c}}var w;w="undefined"!=typeof exports?exports:n.SunCalc={};var D=Math,E=D.PI,M=E/180,P=D.sin,k=D.cos,x=D.tan,z=D.asin,H=D.atan2,S=D.acos,T=864e5,y=2440588,C=2451545,F=23.4397*M;w.getPosition=function(n,t,r){var e=M*-r,i=M*t,d=u(n),f=v(d),s=c(d,e),l=s-f.ra;return{azimuth:o(l,i,f.dec),altitude:a(l,i,f.dec)}};var I=[[-.83,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];w.addTime=function(n,t,r){I.push([n,t,r])};var N=9e-4;w.getTimes=function(n,t,e){function o(n){var t=m(n,x,F),r=g(t,k,H);return h(r,T,C)}var a,c,v,p,w,D,E,P,k=M*-e,x=M*t,z=u(n),H=l(z,k),S=g(0,k,H),T=d(S),y=f(T),C=s(T,y),F=i(C,0),N=h(S,T,C),O={solarNoon:r(N),nadir:r(N-.5)};for(a=0,c=I.length;c>a;a+=1)v=I[a],p=v[0],w=v[1],D=v[2],E=o(p*M),P=N-(E-N),O[w]=r(P),O[D]=r(E);return O},w.getMoonPosition=function(n,t,r){var e=M*-r,i=M*t,d=u(n),f=p(d),s=c(d,e)-f.ra,v=a(s,i,f.dec);return v+=.017*M/x(v+10.26*M/(v+5.1*M)),{azimuth:o(s,i,f.dec),altitude:v,distance:f.dist}},w.getMoonFraction=function(n){var t=u(n),r=v(t),e=p(t),i=149598e3,o=S(P(r.dec)*P(e.dec)+k(r.dec)*k(e.dec)*k(r.ra-e.ra)),a=H(i*P(o),e.dist-i*k(o));return(1+k(a))/2}})(this);